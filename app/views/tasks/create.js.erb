<% unless @task.valid? %>

  alert("Task cannot be empty.");

<% else %>

  <% if @task.completed %>
    $("#completed").append("<%= escape_javascript render('task', :task => @task) %>");
  <% else %>
    $("#uncompleted").append("<%= escape_javascript render('task', :task => @task) %>");
  <% end %>
  $("#task_block_<%= @task.id %>").effect('highlight', 500);
  $("#task_text").val("");
  $("#no_tasks").hide();

<% end %>